<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>인용 하이라이트 테스트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        .highlighted-citation {
            background-color: #fef3c7;
            border: 2px solid #fbbf24;
            padding: 2px 4px;
            border-radius: 4px;
            animation: citation-pulse 2s ease-in-out infinite;
        }
        
        @keyframes citation-pulse {
            0%, 100% {
                background-color: #fef3c7;
            }
            50% {
                background-color: #fde68a;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body class="font-sans p-8">
    <h1 class="text-2xl font-bold mb-4">인용 하이라이트 테스트</h1>
    
    <div id="test-content" class="border p-4 mb-4">
        <h2 class="text-xl font-semibold mb-2">테스트 콘텐츠</h2>
        <p>이것은 테스트 문서입니다. <span class="highlighted-citation">하이라이트된 텍스트</span>가 제대로 표시되는지 확인합니다.</p>
    </div>
    
    <button onclick="testHighlight()" class="bg-orange-500 text-white px-4 py-2 rounded">하이라이트 테스트</button>
    
    <script>
        function testHighlight() {
            // 테스트 텍스트
            const testText = "# 경제 용어\n\n이것은 경제 용어에 대한 설명입니다.\n\n## 정의\n\n경제란 무엇인가에 대한 정의입니다.\n\n이 부분이 인용될 텍스트입니다.";
            const quotedText = "이 부분이 인용될";
            
            // 마크다운 변환
            let contentHtml = marked.parse(testText);
            console.log('Original HTML:', contentHtml);
            
            // 하이라이트 적용
            const escapedText = quotedText.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            const regex = new RegExp(`(${escapedText})`, 'gi');
            contentHtml = contentHtml.replace(regex, '<span class="highlighted-citation">$1</span>');
            
            console.log('Highlighted HTML:', contentHtml);
            
            // 결과 표시
            document.getElementById('test-content').innerHTML = contentHtml;
        }
    </script>
</body>
</html>